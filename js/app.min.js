!function(t){var e=function(e){this.$el=t(e),this.$screenContainer=this.$el.find(".screens"),this.$screens=this.$screenContainer.children(".screen"),this.$thumbs=this.$el.find(".thumbs"),this.ratios={desktop:.727,tablet:1.328,phone:2.08},this.margin=160,this.width=this.$screenContainer.width(),this.thumbRatio=.2,this.activeSlide="desktop",this.siteName=this.$el.data("site")};e.prototype._getX=function(e,i,s){var n=(this.width-t(i).width()*s)/2;return"left"==e?-n:n},e.prototype._moveSlide=function(t,e,i){var s=i?i:this.thumbRatio,n="active"==e?1:s,a="active"==e?0:this._getX(e,t,s);console.log("moving slide",t,"to position",e),TweenLite.to(t,.5,{scale:n,x:a})},e.prototype.transitionSlides=function(t){this.$screenContainer.hasClass("initial")&&this.$screenContainer.removeClass("initial");for(var e in this.$screens){var i,s=this.$screens[e],n=s.hasClass("active")?"active":s.hasClass("right")?"right":"left";i="active"==n&&"right"==t||"right"==n&&"left"==t?"left":"left"==n&&"right"==t||"active"==n&&"left"==t?"right":"active","active"==n||"active"==i?s.css("z-index",2):s.css("z-index",1),this._moveSlide(s,i),s.removeClass(n).addClass(i)}},e.prototype.updateScreen=function(t){for(var e in this.$screens){var i=this.$screens[e].children(".screen-inner"),s="/assets/port-"+this.siteName+"-"+e+"-"+t+".png",n=document.createElement("img");n.src=s,i.html(n)}},e.prototype.init=function(){var e=this.width-2*this.margin,i=this.$screenContainer.height(),s=this,n={};this.$screens.each(function(){var a=t(this),r=a.data("device"),o=s.ratios[r]>1?i:e*s.ratios[r],h=s.ratios[r]<1?e:i/s.ratios[r];a.css({height:o+"px",width:h+"px",left:e/2-h/2+s.margin+"px",top:i/2-o/2+"px"}),n[r]=a}),this.$screens=n,s._moveSlide(this.$screens.phone,"left",.6),s._moveSlide(this.$screens.tablet,"right",.6),t(".slider-nav").on("click","a",function(e){e.preventDefault(),s.transitionSlides(t(this).hasClass("port-left")?"left":"right")}),this.$thumbs.on("click",".thumbnail",function(e){e.preventDefault(),s.$thumbs.find(".thumbnail").removeClass("active"),t(this).addClass("active");var i=t(this).data("screen");s.updateScreen(i)})};var i=new e(".port-slider");i.init(),t(".troop-list").on("click",".trigger",function(e){e.preventDefault();var i=t(this),s=i.parent(),n=i.parents(".troop-list"),a=i.siblings(".profile-content");if(s.hasClass("active"))return s.removeClass("active"),void n.children("li").removeClass("inactive");n.children("li").not(s).removeClass("active").addClass("inactive"),s.removeClass("inactive").addClass("active");var r=s.position().top+s.outerHeight();a.css("top",r+"px")})}(jQuery);