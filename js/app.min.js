function stackBlurImage(e,t,i,a){var s=e,n=s.width,o=s.height,t=t;t.style.width=n+"px",t.style.height=o+"px",t.width=n,t.height=o;var r=t.getContext("2d");r.clearRect(0,0,n,o),r.drawImage(s,0,0,n,o),isNaN(i)||1>i||(a?stackBlurCanvasRGBA(t,0,0,n,o,i):stackBlurCanvasRGB(t,0,0,n,o,i))}function stackBlurCanvasRGBA(e,t,i,a,s,n){if(!(isNaN(n)||1>n)){n|=0;var o,e=e,r=e.getContext("2d");try{try{o=r.getImageData(t,i,a,s)}catch(l){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),o=r.getImageData(t,i,a,s)}catch(l){throw alert("Cannot access local image"),new Error("unable to access local image data: "+l)}}}catch(l){throw alert("Cannot access image"),new Error("unable to access image data: "+l)}var c,h,d,p,u,f,m,g,v,y,b,w,x,C,$,k,T,_,S,B,M,D,I,z,L=o.data,P=n+n+1,q=a-1,E=s-1,N=n+1,O=N*(N+1)/2,R=new BlurStack,U=R;for(d=1;P>d;d++)if(U=U.next=new BlurStack,d==N)var A=U;U.next=R;var j=null,F=null;m=f=0;var G=mul_table[n],H=shg_table[n];for(h=0;s>h;h++){for(k=T=_=S=g=v=y=b=0,w=N*(B=L[f]),x=N*(M=L[f+1]),C=N*(D=L[f+2]),$=N*(I=L[f+3]),g+=O*B,v+=O*M,y+=O*D,b+=O*I,U=R,d=0;N>d;d++)U.r=B,U.g=M,U.b=D,U.a=I,U=U.next;for(d=1;N>d;d++)p=f+((d>q?q:d)<<2),g+=(U.r=B=L[p])*(z=N-d),v+=(U.g=M=L[p+1])*z,y+=(U.b=D=L[p+2])*z,b+=(U.a=I=L[p+3])*z,k+=B,T+=M,_+=D,S+=I,U=U.next;for(j=R,F=A,c=0;a>c;c++)L[f+3]=I=b*G>>H,0!=I?(I=255/I,L[f]=(g*G>>H)*I,L[f+1]=(v*G>>H)*I,L[f+2]=(y*G>>H)*I):L[f]=L[f+1]=L[f+2]=0,g-=w,v-=x,y-=C,b-=$,w-=j.r,x-=j.g,C-=j.b,$-=j.a,p=m+((p=c+n+1)<q?p:q)<<2,k+=j.r=L[p],T+=j.g=L[p+1],_+=j.b=L[p+2],S+=j.a=L[p+3],g+=k,v+=T,y+=_,b+=S,j=j.next,w+=B=F.r,x+=M=F.g,C+=D=F.b,$+=I=F.a,k-=B,T-=M,_-=D,S-=I,F=F.next,f+=4;m+=a}for(c=0;a>c;c++){for(T=_=S=k=v=y=b=g=0,f=c<<2,w=N*(B=L[f]),x=N*(M=L[f+1]),C=N*(D=L[f+2]),$=N*(I=L[f+3]),g+=O*B,v+=O*M,y+=O*D,b+=O*I,U=R,d=0;N>d;d++)U.r=B,U.g=M,U.b=D,U.a=I,U=U.next;for(u=a,d=1;n>=d;d++)f=u+c<<2,g+=(U.r=B=L[f])*(z=N-d),v+=(U.g=M=L[f+1])*z,y+=(U.b=D=L[f+2])*z,b+=(U.a=I=L[f+3])*z,k+=B,T+=M,_+=D,S+=I,U=U.next,E>d&&(u+=a);for(f=c,j=R,F=A,h=0;s>h;h++)p=f<<2,L[p+3]=I=b*G>>H,I>0?(I=255/I,L[p]=(g*G>>H)*I,L[p+1]=(v*G>>H)*I,L[p+2]=(y*G>>H)*I):L[p]=L[p+1]=L[p+2]=0,g-=w,v-=x,y-=C,b-=$,w-=j.r,x-=j.g,C-=j.b,$-=j.a,p=c+((p=h+N)<E?p:E)*a<<2,g+=k+=j.r=L[p],v+=T+=j.g=L[p+1],y+=_+=j.b=L[p+2],b+=S+=j.a=L[p+3],j=j.next,w+=B=F.r,x+=M=F.g,C+=D=F.b,$+=I=F.a,k-=B,T-=M,_-=D,S-=I,F=F.next,f+=a}r.putImageData(o,t,i)}}function stackBlurCanvasRGB(e,t,i,a,s,n){if(!(isNaN(n)||1>n)){n|=0;var o,e=e,r=e.getContext("2d");try{try{o=r.getImageData(t,i,a,s)}catch(l){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),o=r.getImageData(t,i,a,s)}catch(l){throw alert("Cannot access local image"),new Error("unable to access local image data: "+l)}}}catch(l){throw alert("Cannot access image"),new Error("unable to access image data: "+l)}var c,h,d,p,u,f,m,g,v,y,b,w,x,C,$,k,T,_,S,B,M=o.data,D=n+n+1,I=a-1,z=s-1,L=n+1,P=L*(L+1)/2,q=new BlurStack,E=q;for(d=1;D>d;d++)if(E=E.next=new BlurStack,d==L)var N=E;E.next=q;var O=null,R=null;m=f=0;var U=mul_table[n],A=shg_table[n];for(h=0;s>h;h++){for(C=$=k=g=v=y=0,b=L*(T=M[f]),w=L*(_=M[f+1]),x=L*(S=M[f+2]),g+=P*T,v+=P*_,y+=P*S,E=q,d=0;L>d;d++)E.r=T,E.g=_,E.b=S,E=E.next;for(d=1;L>d;d++)p=f+((d>I?I:d)<<2),g+=(E.r=T=M[p])*(B=L-d),v+=(E.g=_=M[p+1])*B,y+=(E.b=S=M[p+2])*B,C+=T,$+=_,k+=S,E=E.next;for(O=q,R=N,c=0;a>c;c++)M[f]=g*U>>A,M[f+1]=v*U>>A,M[f+2]=y*U>>A,g-=b,v-=w,y-=x,b-=O.r,w-=O.g,x-=O.b,p=m+((p=c+n+1)<I?p:I)<<2,C+=O.r=M[p],$+=O.g=M[p+1],k+=O.b=M[p+2],g+=C,v+=$,y+=k,O=O.next,b+=T=R.r,w+=_=R.g,x+=S=R.b,C-=T,$-=_,k-=S,R=R.next,f+=4;m+=a}for(c=0;a>c;c++){for($=k=C=v=y=g=0,f=c<<2,b=L*(T=M[f]),w=L*(_=M[f+1]),x=L*(S=M[f+2]),g+=P*T,v+=P*_,y+=P*S,E=q,d=0;L>d;d++)E.r=T,E.g=_,E.b=S,E=E.next;for(u=a,d=1;n>=d;d++)f=u+c<<2,g+=(E.r=T=M[f])*(B=L-d),v+=(E.g=_=M[f+1])*B,y+=(E.b=S=M[f+2])*B,C+=T,$+=_,k+=S,E=E.next,z>d&&(u+=a);for(f=c,O=q,R=N,h=0;s>h;h++)p=f<<2,M[p]=g*U>>A,M[p+1]=v*U>>A,M[p+2]=y*U>>A,g-=b,v-=w,y-=x,b-=O.r,w-=O.g,x-=O.b,p=c+((p=h+L)<z?p:z)*a<<2,g+=C+=O.r=M[p],v+=$+=O.g=M[p+1],y+=k+=O.b=M[p+2],O=O.next,b+=T=R.r,w+=_=R.g,x+=S=R.b,C-=T,$-=_,k-=S,R=R.next,f+=a}r.putImageData(o,t,i)}}function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];!function(e){function t(e,t,i){var a;return function(){var s=this,n=arguments,o=function(){a=null,i||e.apply(s,n)},r=i&&!a;clearTimeout(a),a=setTimeout(o,t),r&&e.apply(s,n)}}function i(){e("body").addClass("menu-open");var t=e(".container"),i=e(".mobile-menu").children("li");TweenLite.set(i,{x:250,opacity:.5}),TweenLite.to(t,.3,{x:-250,ease:Power3.easeOut});for(var a=0;a<i.length;a++)TweenLite.to(i[a],.2,{x:0,opacity:1,delay:.075*a+.05})}function a(){e("body").removeClass("menu-open"),TweenLite.to(e(".container"),.3,{x:0,ease:Power3.easeOut})}function s(e){var t=e.children("li"),i=31*t.length+8;TweenLite.set(t,{x:150,opacity:.5}),TweenLite.to(e,.25,{height:i,ease:Power3.easeOut});for(var a=0;a<t.length;a++)TweenLite.to(t[a],.2,{x:0,opacity:1,delay:.06*a+.025})}function n(e){TweenLite.to(e,.25,{height:0,ease:Power3.easeOut})}function o(t){this.$el=e(t)}function r(){console.log("shooting bananas");for(var t=.8,i=Math.ceil(4*Math.random()+1),a=[0,-20],s=e(".bananas"),n=0;i>n;n++){var o=e('<div class="shooting-banana" />'),r=10*(.5-Math.random()),c=20*-Math.random();console.log("initial x velocity:",r+", initial y velocity:",c),s.append(o),l(o,a,r,c,t)}}function l(e,t,i,a,s){var n=t[0]+i,o=t[1]+a,r="matrix(1, 0, 0, 1, "+n+", "+o+")";a+=s,e[0].style.webkitTransform=r,e[0].style.MozTransform=r,e[0].style.msTransform=r,e[0].style.OTransform=r,e[0].style.transform=r,20>o?requestAnimationFrame(function(){l(e,[n,o],i,a,s)}):e.remove()}var c=840,h=580;if(Modernizr.touch)e(".main-nav").on("focus, click",".has-dropdown > a",function(t){t.preventDefault(),e(this).parent("li").toggleClass("active")}).on("mouseout",function(){e(this).parent("li").removeClass("active")});else{var d=0,p=e('[role="banner"]'),u=p.find(".main-nav"),f=t(function(){var t=e(this).scrollTop();t>d?u.hasClass("sticky")&&u.slideUp(150,function(){u.removeClass("sticky").show()}):t>p.offset().top+p.outerHeight()?!u.hasClass("sticky")&&d-t>10&&u.hide().addClass("sticky").slideDown():u.removeClass("sticky"),d=t},10);window.addEventListener("scroll",f)}if(e(".mobile-menu").on("click",".has-dropdown > a",function(t){t.preventDefault();var i=e(this);i.parent("li").hasClass("active")?(i.parent("li").removeClass("active"),n(i.siblings("ul"))):(n(m.find(".has-dropdown.active ul")),m.find(".has-dropdown").removeClass("active"),i.parent("li").addClass("active"),s(i.siblings("ul")))}),Modernizr.mq("only screen and (max-width:"+c+"px)")){console.log("medium screen or down");var m=e(".mobile-menu"),g=e(".main-menu").children("li");m.append(g),e(".mobile-menu-trigger").on("click",function(t){t.preventDefault(),e(this).hasClass("active")?(e(this).removeClass("active"),a()):(e(this).addClass("active"),i())})}e(".input-wrapper").on("focus","input, textarea",function(){e(this).parent(".input-wrapper").addClass("focused")}).on("blur","input, textarea",function(){e(this).parent(".input-wrapper").removeClass("focused")}),e(".select-box").on("change","select",function(){this.value?e(this).parent(".select-box").addClass("selected"):e(this).parent(".select-box").removeClass("selected")}),e(".date-input input").datepicker({autoclose:!0,format:"mm/dd/yyyy"}).on("changeDate",function(){e(this).parent().addClass("selected")}),e(".input-switch").on("change",function(){var t=e(this).data("switchto"),i=e(this).parents(".row").find(".switch-target");i.removeClass("active").filter("#"+t).addClass("active")});var v=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:e(".add-files")[0],container:e(".uploaded-files")[0],drop_element:e(".upload-box")[0],url:"/work-with-us/upload/",filters:{max_file_size:"20mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png"},{title:"Zip files",extensions:"zip"},{title:"Doc files",extensions:"pdf,doc,docx"}]},flash_swf_url:"/bower_components/plupload/js/Moxie.swf",silverlight_xap_url:"/bower_components/plupload/js/Moxie.xap",init:{PostInit:function(){"html5"===v.runtime&&(e(".upload-box, .upload-box div").on("dragenter",function(){e(".upload-box").addClass("incoming")}),e(".upload-box, .upload-box div").on("dragleave drop",function(){e(".upload-box").removeClass("incoming")}))},FilesAdded:function(t,i){e(".upload-box").hasClass("initial")&&(e(".upload-box").removeClass("initial"),e(".add-files").html("select more files")),plupload.each(i,function(t){e(".uploaded-files").append('<div id="'+t.id+'"><span class="name">'+t.name+" ("+plupload.formatSize(t.size)+')</span><span class="bg"></span><input type="hidden" name="attachments_realname[]" value=""><input type="hidden" name="attachments_name[]" value="'+t.name+'"></div>')}),v.start()},FileUploaded:function(t,i,a){var s=e.parseJSON(a.response);e("#"+i.id).find("input:first").val(s.result.server_filename)},UploadProgress:function(e,t){console.log("percent complete:",t.percent)},Error:function(e,t){console.log("error:",t.code,t.message)}}});v.init(),e(".request-quote-form").length>0&&(e(".request-quote-form").validationEngine("attach",{showArrow:!1,binded:!1,promptPosition:"bottomLeft",custom_error_messages:{required:{message:"Oops, looks like you forgot to add this field"},"#url":{"custom[url]":{message:"That doesn't look like the URLs we're used to."}}}}),e(".request-quote-form").on("blur",".form-part1 input",function(){var t=e(this),i=e(".request-quote-form").find(".monkee-step"),a=e(".request-quote-form").find(".monkee"),s=!t.validationEngine("validate");s?t.parent().is(":last-child")&&t.parents(".form-step").addClass("complete"):t.parents(".form-step").removeClass("complete");var n=i.filter(".complete").length;if(n>0){var o=1-n/i.length;a.children(".dark-monkee").css("opacity",o),console.log("opacity should be",o)}n===i.length?a.addClass("speak"):a.removeClass("speak")}));var y=function(t){this.$el=e(t),this.$screenContainer=this.$el.find(".screens"),this.$screens=this.$screenContainer.children(".screen"),this.$thumbs=this.$el.find(".thumbs"),this.ratios={desktop:.727,tablet:1.328,phone:2.08},this.margin=160,this.width=this.$screenContainer.width(),this.thumbRatio=.2,this.activeSlide="desktop",this.siteName=this.$el.data("site")};if(y.prototype._getX=function(t,i,a){var s=(this.width-e(i).width()*a)/2;return"left"==t?-s:s},y.prototype._moveSlide=function(e,t,i){var a=i?i:this.thumbRatio,s="active"==t?1:a,n="active"==t?0:this._getX(t,e,a);console.log("moving slide",e,"to position",t),TweenLite.to(e,.5,{scale:s,x:n})},y.prototype.transitionSlides=function(e){this.$screenContainer.hasClass("initial")&&this.$screenContainer.removeClass("initial");for(var t in this.$screens){var i,a=this.$screens[t],s=a.hasClass("active")?"active":a.hasClass("right")?"right":"left";i="active"==s&&"right"==e||"right"==s&&"left"==e?"left":"left"==s&&"right"==e||"active"==s&&"left"==e?"right":"active","active"==s||"active"==i?a.css("z-index",2):a.css("z-index",1),this._moveSlide(a,i),a.removeClass(s).addClass(i)}},y.prototype.updateScreen=function(e){for(var t in this.$screens){var i=this.$screens[t].children(".screen-inner"),a="/uploads/portfolio/"+t+"_image_"+e+".png",s=document.createElement("img");s.src=a,i.html(s)}},y.prototype.initFullSlider=function(){var t=this.width-2*this.margin,i=this.$screenContainer.height(),a=this,s=0,n={};this.$screens.each(function(){var o=e(this),r=o.data("device");o.hasClass("horizontal")&&(a.ratios[r]=1/a.ratios[r]);var l=a.ratios[r]>1?i:t*a.ratios[r],c=a.ratios[r]<1?t:i/a.ratios[r];o.css({height:l+"px",width:c+"px",left:t/2-c/2+a.margin+"px",top:i/2-l/2+"px"}),n[r]=o,s++}),this.$screens=n,console.log("there are this many screens:",s),s>2&&(a._moveSlide(this.$screens.phone,"left",.6),a._moveSlide(this.$screens.tablet,"right",.6),e(".slider-nav").on("click","a",function(t){t.preventDefault(),a.transitionSlides(e(this).hasClass("port-left")?"left":"right"),a.$screens.desktop.find(".scroll-msg").length>0&&a.$screens.desktop.find(".scroll-msg").remove()}))},y.prototype.initMobileSlider=function(){var t=this.width,i=this,a={};this.$screens.each(function(){var s=e(this),n=s.data("device"),o=null,r=null,l=0,c=0;return"tablet"==n?!0:("desktop"==n?(r=1.2*t,o=r*i.ratios[n],l=.2*t):"phone"==n&&(r=.4*t,o=r*i.ratios[n],c=.15*o,l=.05*t),s.css({height:o+"px",width:r+"px",left:l+"px",top:c+"px"}),void(a[n]=s))}),this.$screens=a},y.prototype.init=function(){var t=this;Modernizr.mq("only screen and (min-width: "+h+"px)")?this.initFullSlider():this.initMobileSlider(),this.$thumbs.find(".thumbnail:first").addClass("active"),this.$thumbs.on("click",".thumbnail",function(i){i.preventDefault(),t.$thumbs.find(".thumbnail").removeClass("active"),e(this).addClass("active");var a=e(this).data("screen");t.updateScreen(a)});var i=this.$screenContainer.find(".scroll-msg");i.length>0&&i.parent(".screen-inner").on("scroll",function(){e(this).children(".scroll-msg").remove(),e(this).off("scroll")})},e(".port-slider").length>0){var b=new y(".port-slider");b.init()}e(".quote-slider").slick({dots:!0,arrows:!1,infinite:!0,speed:300,slidesToShow:1,slide:"li"}),e(".thumbs-slider").slick({dots:!1,arrows:!0,slidesToShow:3,slidesToScroll:3,infinite:!1,swipeToSlide:!0}),e(".fullwidth-slider ul").slick({dots:!1,arrows:!0,slidesToShow:1,slide:"li",centerMode:!0,centerPadding:"140px",onInit:function(){e(".slick-prev").detach().appendTo(".slick-active .slick-photo-wrapper"),e(".slick-next").detach().appendTo(".slick-active .slick-photo-wrapper")},onAfterChange:function(){e(".slick-prev").detach().appendTo(".slick-active .slick-photo-wrapper"),e(".slick-next").detach().appendTo(".slick-active .slick-photo-wrapper")},responsive:[{breakpoint:h,settings:{dots:!1,arrows:!1,infinite:!0,slidesToShow:1,slide:"li",centerMode:!0,centerPadding:"80px"}}]});var w=function(t){this.$el=e(t),this.$current=this.$el.find(".current"),this.$next=this.$el.find(".next"),this.$nav=this.$el.find(".slider-nav"),this.$caption=this.$el.find(".caption"),this.maxBlur=120,this.steps=3,this.curSlide=1};w.prototype.addBlurCanvas=function(t,i){var a=this,s=e('<img width="'+this.width+'" height="'+this.height+'">'),n=this.maxBlur/this.steps;s.load(function(){console.log("image loads"),t.append(s);for(var e=1;e<a.steps;e++){var i=document.createElement("canvas");i.width=a.width,i.height=a.height,i.className="canvas"+e,t.append(i),stackBlurImage(s[0],i,n*e+n,!1)}}),s.attr("src",i)},w.prototype.animate=function(e,t){var i=new TimelineLite,a=this,s=this.curSlide>3?1:this.curSlide+1;this.curSlide=s,t||(t=[]);for(var n=1;n<this.steps;n++)i.to(this.$current.children(".canvas"+n),.4,{opacity:1},"-=0.2");i.to(this.$caption,.5,{x:-this.width,ease:Power2.easeIn,onComplete:function(){a.updateCaption(s)}},"-=0.8"),i.to(this.$current,.8,{opacity:0},"-=0.5");for(var o=this.steps-1;o>0;o--)i.to(this.$next.children(".canvas"+o),.4,{opacity:0},"-=0.2");i.to(this.$caption,.4,{x:0,ease:Power2.easeOut},"-=0.5"),i.eventCallback("onComplete",e,t,a),i.play()},w.prototype.updateSlides=function(){{var t=this.curSlide>3?1:this.curSlide+1,i=this.$nav.children("[data-id="+t+"]"),a='<div class="next" />';e('<img width="'+this.width+'" height="'+this.height+'">')}this.$nav.children("li").removeClass("active"),this.$nav.children("[data-id="+this.curSlide+"]").addClass("active"),this.$current.remove(),this.$next.removeClass("next").addClass("current"),this.$current=this.$next,this.$next=e(a),this.$el.append(this.$next),this.addBlurCanvas(this.$next,i.data("image"))},w.prototype.updateCaption=function(e){var t=this.$nav.children("[data-id="+e+"]");1==e?(this.$caption.addClass("landing-caption"),this.$caption.children(".caption-title").html("")):(this.$caption.removeClass("landing-caption"),this.$caption.children(".caption-title").html(t.children(".title").text())),this.$caption.children(".caption-content").html(t.children(".slide-caption").html())},w.prototype.init=function(){var e=this,t=this.$nav.children("[data-id=1]").data("image"),i=this.$nav.children("[data-id=2]").data("image");this.width=this.$el.width(),this.height=this.$el.height(),console.log("width is",this.width,"height is",this.height),this.addBlurCanvas(this.$current,t),this.addBlurCanvas(this.$next,i),this.$el.find(".slide-trigger").on("click",function(t){t.preventDefault(),e.animate(e.updateSlides)})};var x=new w(e(".hero-slideshow"));x.init(),e(".troop-list").on("click",".trigger",function(t){t.preventDefault();var i=e(this),a=i.parent(),s=i.parents(".troop-list"),n=i.siblings(".profile-content");if(a.hasClass("active"))return a.removeClass("active"),void s.children("li").removeClass("inactive");s.children("li").not(a).removeClass("active").addClass("inactive"),a.removeClass("inactive").addClass("active");var o=a.position().top+a.outerHeight();n.css("top",o+"px")});var C=e(".accordion");if(C.length>0&&(C.each(function(){var t=e(this),i=t.children(".content").outerHeight();t.data("content-height",i),t.children(".content").css("height",0)}),C.on("click",".trigger",function(t){t.preventDefault();var i=e(this).parent(".accordion"),a=i.children(".content"),s=i.data("content-height");i.hasClass("open")?(i.removeClass("open"),s=0):i.addClass("open"),TweenLite.to(a,.5,{height:s,ease:Power3.easeOut})})),o.prototype.blurImage=function(){console.log("blur image"),this.$image=this.$el.find(".image-bg");var t=this;this.$image.on("load",function(){var i=t.$el.outerWidth(),a=t.$el.outerHeight(),s=t.$image.width(),n=t.$image.height(),o=0,r=0,l=0,c=0;if(s/n>i/a?(o=a*(s/n),r=a,l=-(o-i)/2):(o=i,r=i*(n/s),c=-(r-a)/2),t.$image.css({width:o+"px",height:r+"px",left:l+"px",top:c+"px",display:"block"}),Modernizr.canvas&&!Modernizr.touch){var h=document.createElement("canvas");h.width=o,h.height=r,h.style.left=l+"px",h.style.top=c+"px",t.$el.append(h);var d=e(window),p=new TweenLite.to(h,1,{opacity:1,paused:!0}),u=function(){var e=d.scrollTop(),i=1/(t.$el.height()-80)*e;i>=0&&1>=i&&p.progress(i)};stackBlurImage(t.$image[0],h,40,!1),d.on("scroll",u)}}).each(function(){})},e(".blur-image").length>0){var $=new o(".blur-image");$.blurImage()}if(e("#contact-map").length>0){var k=[{featureType:"landscape",elementType:"all",stylers:[{color:"#dbf1ee"},{visibility:"on"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#b4d7e6"},{visibility:"on"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#69bfb2"},{visibility:"on"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{visibility:"on"}]},{featureType:"road.arterial",elementType:"all",stylers:[{color:"#ffffff"},{visibility:"simplified"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#bcca7f"},{visibility:"on"}]},{featureType:"road.local",elementType:"all",stylers:[{color:"#d6ebe8"},{visibility:"off"}]},{featureType:"poi.attraction",elementType:"geometry.fill",stylers:[{color:"#cce5e1"},{visibility:"on"}]},{featureType:"poi.place_of_worship",elementType:"geometry.fill",stylers:[{color:"#cce5e1"},{visibility:"on"}]},{featureType:"poi.government",elementType:"geometry.fill",stylers:[{color:"#cce5e1"},{visibility:"on"}]},{featureType:"poi.school",elementType:"geometry.fill",stylers:[{color:"#cce5e1"},{visibility:"on"}]},{featureType:"poi.business",elementType:"geometry.fill",stylers:[{color:"#bcd7d2"},{visibility:"on"}]},{featureType:"poi.medical",elementType:"geometry",stylers:[{color:"#e5fbf8"},{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{hue:"#ffffff"},{saturation:-100},{lightness:100},{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{hue:"#ffffff"},{saturation:0},{lightness:100},{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{color:"#e6faf8"},{visibility:"off"}]},{featureType:"administrative.neighborhood",elementType:"labels.text.fill",stylers:[{color:"#42454c"},{visibility:"on"}]},{featureType:"road.local",elementType:"all",stylers:[{color:"#cbe7e3"},{visibility:"simplified"}]}],T=new google.maps.LatLng(30.383294,-97.743659),_=new google.maps.MarkerImage("/images/map-marker.png",null,null,null,new google.maps.Size(100,130)),S=new google.maps.Map(document.getElementById("contact-map"),{zoom:14,center:T,styles:k,scrollwheel:!1}),B=new google.maps.Marker({map:S,animation:google.maps.Animation.DROP,position:T,icon:_});B.setMap(S)}if(Modernizr.touch||e(".bananas").on("mouseenter",r),e(".back-to-top").on("click",function(e){e.preventDefault(),window.scrollTo(0,0)}),e(".news-load-more").on("click",function(t){t.preventDefault(),e.getJSON("/latest-news-ajax/?page="+(news_current_page+1),function(t){e.each(t.articles,function(t,i){block=e(".news-item").last().parent().clone(),block.find(".date").html(i.publish_on_month+"."+i.publish_on_day+"<span>"+i.publish_on_year+"</span>"),block.find("a").attr("href",i.url).attr("title",i.titlel).html(i.title),e(".news-item").last().parent().after(block)}),news_current_page+1===news_total_pages?e(".news-load-more").hide():news_current_page++})}),e(".form-newsletter form").on("submit",function(t){return t.preventDefault(),e.getJSON("/mailchimp-subscribe/?email="+encodeURIComponent(e(".form-newsletter input[name=email]").val()),function(t){"passed"===t.status?e(".form-newsletter .subscribe-status").addClass("success"):e(".form-newsletter .subscribe-error").show()}),!1}),e("#flowchart404").length>0&&!Modernizr.touch&&Modernizr.mq("only screen and (min-width:"+c+"px)")){var M=new Image,D=document.getElementById("flowchart404");M.onload=function(){D.appendChild(M),D.className="loaded"},M.src="/images/flowchart404.png"}}(jQuery);